<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Nachhaltigkeit MalekBrockmann</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind-Ausgabe -->
    <link href="src/output.css" rel="stylesheet" />

    <!-- Deine eigene CSS-Datei (falls benötigt) -->
    <link href="src/input.css" rel="stylesheet" />

    <!-- GSAP und Plugins -->
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/MotionPathPlugin.min.js"
    ></script>
  </head>

  <body>
    <div class="page-wrap">
      <!-- Inhalt -->
      <div class="content">
        <!-- Überschrift -->
        <div class="heading-wrap">
          <div class="backing"></div>
          <h1 class="heading">Tiefenbohrung</h1>
        </div>

        <!-- Animierter Titel -->
        <div class="animated-title">
          <div class="text-top">
            <div><span>Bohrstelle</span></div>
          </div>
          <div class="text-bottom">
            <div><span></span></div>
          </div>
        </div>

        <!-- Call-to-Action Container + Button (oben) -->
        <div class="cta-container">
          <button class="button-27" role="button">Erfahre mehr!</button>
        </div>
      </div>

      <!-- "Track" für den Pfad, auf dem sich der Kreis bewegt -->
      <div class="track">
        <div class="image-wrap">
          <!-- Der Kreis, der animiert wird -->
          <div id="circle" class="circle" style="transform: scale(0.67)">
            <div class="pulse-wave"></div>
          </div>

          <!-- SVG-Grafik -->
          <div class="html-embed-2 w-embed">
            <svg
              version="1.1"
              id="Layer_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              x="0px"
              y="0px"
              viewBox="0 0 8192 4320"
              preserveAspectRatio="xMidYMid meet"
              style="enable-background: new 0 0 8192 4320"
              xml:space="preserve"
            >
              <style type="text/css">
                .st0 {
                  fill: none;
                  stroke: #30352e;
                  stroke-width: 5;
                  stroke-linecap: round;
                  stroke-miterlimit: 10;
                }

                .st1 {
                  fill: none;
                  stroke: #30352e;
                  stroke-width: 5;
                  stroke-linecap: round;
                  stroke-miterlimit: 10;
                  stroke-dasharray: 11.9945, 11.9945;
                }
              </style>
              <image
                style="overflow: visible"
                width="5488"
                height="2894"
                x="1352"
                y="813"
                xlink:href="https://github.com/MalekBrockmann/Webseite-Nachhaltigkeit-/blob/main/Bilder/GroundLayersKomp.png?raw=true"
              ></image>
              <g>
                <g transform="translate(1300, 1005) scale(0.67)">
                  <path
                    id="mountain-path"
                    class="st1"
                    d="M3956.2,857.5c-4.54,45.36,1.03,80.27,7.58,104.83,9.96,37.36,20.99,46.22,29.33,88,7.18,35.95,2.19,45.25,5.33,101.33,3.53,62.99,10.46,62.48,13.33,114.67,3.76,68.26-8.06,69.76-5.33,133.33,2.55,59.36,14.88,105.4,24,138.67,19.01,69.4,30.1,70.79,45.33,133.33,8.58,35.22,18.77,78.4,16,133.33-2.56,50.81-15.02,88-34.67,146.67-26.3,78.52-37.77,81.17-45.33,128-5.91,36.61-.5,44.88,2.67,125.33,2.62,66.54-1.08,60.8,0,173.33.8,82.77,1.19,124.16,5.33,162.67,8.78,81.63,19.27,80.44,29.33,160,7.22,57.09,6.59,108.29,5.33,210.67-.51,41.58-1.76,94.45-4.74,156.02"
                  />
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery-Einbindung (nur einmal) -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>

    <!-- Eigene Skripte -->
    <script>
      // Top-/Bottom-Texte bei Scrollen austauschen
      function restartAnimation() {
        const topElement = document.querySelector(".animated-title .text-top div");
        const bottomElement = document.querySelector(
          ".animated-title .text-bottom div"
        );

        if (topElement) {
          topElement.style.animation = "none";
          void topElement.offsetHeight;
          topElement.style.animation = "showTopText 1s forwards";
        }

        if (bottomElement) {
          bottomElement.style.animation = "none";
          void bottomElement.offsetHeight;
          bottomElement.style.animation = "showBottomText 0.5s forwards";
        }
      }

      // Texte für die Layer
      const layerTexts = {
        1: {top: "Bohrstelle",bottom:"Die Zieltiefe liegt bei etwa 20 km um superkritische Wärme zu gewinnen." },
        2: { top: "1 km", bottom: "Temperaturen von 50-100°C gefunden."},
        3: { top: "3 km", bottom: "Jeder Kilometer ist ungefär 25°C wärmer."},
        4: { top: "5 km", bottom: "Die Tiefsten Mienen wurden hier errichtet."},
        5: {top: "9,1 km",bottom: "Das Kontinentale Tiefbohrprogramm der Bundesrepublik Deutschland (KTB) erreichte diese Tiefe zu Forschungszwecken."},
        6: {top: "12,2 km",bottom: "Das Kola Superdeep Borehole (USSR) gilt bis heute als die tiefste Bohrung aller Zeiten. Weiter versuche zu graben sind gescheitert. Eine neue Technologie ist notwendig."         },
        7: {top: "15 km",bottom: "Die Millimeter-Wave-Bohrtechnologie nutzt hochfrequente Energie, um harte Gesteinsschichten zu schmelzen. Das problem des Verschleißens von Bohrern wurde gelöst."         },
        8: {top: "20 km", bottom: "In diesen Tiefen kann auf extrem heiße (500°C) geothermische Energie zugegriffen werden. Dies bietet weltweite, nachhaltige Energieunabhängigkeit."},
      };

      let lastTopText = "";
      let lastBottomText = "";

      // Scroll-Listener
      window.addEventListener("scroll", () => {
        const topText = document.querySelector(".text-top div span");
        const bottomText = document.querySelector(".text-bottom div span");

        // Scrollposition in Prozent
        const scrollY = window.scrollY;
        const documentHeight =
          document.body.scrollHeight - window.innerHeight;
        const scrollPercentage = (scrollY / documentHeight) * 100;

        let newTopText = "";
        let newBottomText = "";

        if (scrollPercentage > 90) {
          newTopText = layerTexts[8]?.top;
          newBottomText = layerTexts[8]?.bottom;
        } else if (scrollPercentage > 75) {
          newTopText = layerTexts[7]?.top;
          newBottomText = layerTexts[7]?.bottom;
        } else if (scrollPercentage > 60) {
          newTopText = layerTexts[6]?.top;
          newBottomText = layerTexts[6]?.bottom;
        } else if (scrollPercentage > 50) {
          newTopText = layerTexts[5]?.top;
          newBottomText = layerTexts[5]?.bottom;
        } else if (scrollPercentage > 40) {
          newTopText = layerTexts[4]?.top;
          newBottomText = layerTexts[4]?.bottom;
        } else if (scrollPercentage > 30) {
          newTopText = layerTexts[3]?.top;
          newBottomText = layerTexts[3]?.bottom;
        } else if (scrollPercentage > 20) {
          newTopText = layerTexts[2]?.top;
          newBottomText = layerTexts[2]?.bottom;
        } else {
          newTopText = layerTexts[1]?.top;
          newBottomText = layerTexts[1]?.bottom;
        }

        // Nur aktualisieren, wenn sich was ändert
        if (newTopText !== lastTopText || newBottomText !== lastBottomText) {
          if (topText) topText.textContent = newTopText || "";
          if (bottomText) bottomText.textContent = newBottomText || "";
          restartAnimation();
          lastTopText = newTopText;
          lastBottomText = newBottomText;
        }
      });
    </script>

    <script>
      // Animiert den Kreis entlang des Pfades
      function init() {
        gsap.registerPlugin(MotionPathPlugin, ScrollTrigger);

        gsap.to("#circle", {
          motionPath: {
            path: "#mountain-path",
            align: "#mountain-path",
            alignOrigin: [0.5, 0.5],
            autoRotate: true,
          },
          scrollTrigger: {
            trigger: ".track",
            start: "top top",
            end: "bottom bottom",
            scrub: 1,
          },
          ease: "none",
        });

        gsap.ticker.add(() =>
          gsap.to(".image-wrap", {
            duration: 0.5,
            x: -gsap.getProperty(".circle", "x"),
            y: -gsap.getProperty(".circle", "y"),
          })
        );

        window.onload = window.onresize = () => {
          gsap.set(".image-wrap", {
            left: window.innerWidth / 2,
            top: window.innerHeight / 2,
          });
        };
      }

      document.addEventListener("DOMContentLoaded", init);
    </script>

    <script>
      // Debug: Scrollposition ausgeben
      window.addEventListener("scroll", () => {
        console.log(`Scroll position: ${window.scrollY}px`);
      });
    </script>
  </body>
</html>
